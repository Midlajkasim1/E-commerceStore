<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shop Page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Custom styles */
    .search-form {
      display: flex;
      align-items: center;
      background-color: #f1f1f1;
      border-radius: 25px;
      max-width: 250px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    .search-input {
      flex: 1;
      padding: 8px 10px;
      border: none;
      outline: none;
      background-color: transparent;
    }

    .search-button {
      padding: 8px 15px;
      background-color: #1e918b;
      color: #fff;
      border: none;
      border-radius: 15px;
      transition: background-color 0.3s, transform 0.2s;
    }

    .search-button:hover {
      background-color: #0056b3;
      transform: scale(1.05);
    }

    .wishlist-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: rgba(237, 247, 247, 0.8);
      padding: 8px;
      border-radius: 50%;
      cursor: pointer;
    }

    .product-card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      position: relative;
      transition: box-shadow 0.3s;
    }

    .product-card:hover {
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .add-to-cart-btn {
      background-color: #46698f;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
      transition: background-color 0.3s;
    }

    .add-to-cart-btn:hover {
      background-color: #0056b3;
    }

    .price-button {
      background-color: #f1f1f1;
      color: #333;
      border: 1px solid #ddd;
      border-radius: 30px;
      padding: 10px 20px;
      cursor: pointer;
      text-align: center;
      font-size: 14px;
      transition: background-color 0.3s, transform 0.2s;
    }

    .price-button:hover {
      background-color: #007bff;
      color: #fff;
      transform: scale(1.05);
    }
  </style>
</head>
<body>
  <%-include("../../views/partials/user/header")%>

  <div class="container my-4">
    <!-- Search Bar -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <form action="/search" method="POST" class="search-form">
        <input type="text" name="query" placeholder="Search items..." class="search-input" />
        <button type="submit" class="search-button">Search</button>
      </form>
    </div>

    <div class="row">
      <!-- Sidebar -->
      <aside class="col-lg-3 mb-4">
        <div class="p-3 border rounded">
          <h5 class="mb-3">Categories</h5>
          <ul class="list-styled">
            <%for(let i=0;i<category.length;i++){%>
            <li>
                <a href="/filter?category=<%=category[i]._id%>" class="text-decoration-none text-dark"><%=category[i].name%></a>
            </li>
            <%}%>
          </ul>
        </div>

        <div class="p-3 border rounded mt-4">
          <h5 class="mb-3">Filter by Price</h5>

             <a href="/filterPrice?gt=0&lt=500"> <button type="button" class="price-button w-100 mb-2">Under ₹500</button></a>
            <a href="/filterPrice?gt=500&lt=1000"><button type="button"  class="price-button w-100 mb-2">₹500 - ₹1000</button></a>
            <a href="/filterPrice?gt=1000&lt=1500"><button type="button"  class="price-button w-100 mb-2">₹1000 - ₹1500</button></a>
            <a href="/filterPrice?gt=1500&lt=1000000"></a> <button type="button" class="price-button w-100">Above ₹1500</button></a>
        </div>
      </aside>

      <!-- Product Grid -->
      <main class="col-lg-9">
        <!-- Single row for products -->
        <div class="row g-4">
          <% for(let i = 0; i < products.length; i++) { %>
            <div class="col-md-4">
              <div class="product-card">
                <span class="wishlist-btn">❤️</span>
                <img src="/uploads/re-image/<%= products[i].productImage[0] %>" alt="<%= products[i].productName %>" class="img-fluid rounded">
                <h5 class="mt-3"><%= products[i].productName %></h5>
                <p class="text-muted"><strike>₹<%= products[i].regularPrice.toLocaleString('en-IN') %></strike></p>
                <p>₹<%= products[i].salePrice.toLocaleString('en-IN') %></p>
                <button class="add-to-cart-btn w-100">Add to Cart</button>
              </div>
            </div>
          <% } %>
        </div>
      </main>
      
    </div>

    <!-- Pagination -->
    <div class="pagination">
        <% if (currentPage > 1) { %>
          <a class="btn" href="/shop?page=<%= currentPage - 1 %>">Prev</a>
        <% } %>
   
   
        <% for (let i = 1; i <= totalPages; i++) { %>
          <a class="btn <%= currentPage === i ? 'active' : '' %>" href="/shop?page=<%= i %>"><%= i %></a>
        <% } %>
   
   
        <% if (currentPage < totalPages) { %>
          <a class="btn" href="/shop?page=<%= currentPage + 1 %>">Next</a>
        <% } %>
      </div>
  
   
  </div>
  <%-include("../../views/partials/user/footer")%>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

